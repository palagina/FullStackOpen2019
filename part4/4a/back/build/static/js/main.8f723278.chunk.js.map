{"version":3,"sources":["components/Search.js","components/AddNew.js","components/Post.js","components/PostList.js","services/posts.js","components/Notification.js","App.js","index.js"],"names":["Search","_ref","search","handleSearch","react_default","a","createElement","placeholder","value","onChange","AddNew","handleData","newPost","handleChange","onSubmit","title","name","author","type","Post","post","deletePost","url","likes","id","onClick","postListStyle","color","paddingTop","fontSize","PostList","searchFilter","updatePost","style","map","components_Post","key","services_posts","axios","get","then","response","data","newObject","put","concat","delete","errorStyle","display","background","borderStyle","borderRadius","padding","marginBottom","successStyle","noMessage","Notification","message","App","_useState","useState","_useState2","Object","slicedToArray","posts","setPosts","_useState3","_useState4","setNewPost","_useState5","_useState6","setSearch","_useState7","_useState8","setMessage","useEffect","postService","initialPosts","catch","error","console","log","postMatch","postObject","window","confirm","updatedPost","setTimeout","components_Notification","components_Search","event","target","components_AddNew","preventDefault","newTitle","length","find","undefined","returnedPost","addPost","prevState","objectSpread","newAuthor","components_PostList","filter","toLowerCase","includes","deletedPostTitle","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.8f723278.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Search = ({ search, handleSearch }) => {\r\n\r\n  return (\r\n    <div>\r\n     <form>\r\n        <input placeholder=\"Search..\" value={search} onChange={handleSearch}/>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Search","import React from \"react\";\r\n\r\nconst AddNew = ({ handleData, newPost, handleChange}) => {\r\n  return (\r\n    <div>\r\n     <h3>Add a new phone</h3>\r\n     <form onSubmit={handleData}>\r\n        <div>\r\n          Title: <input value={newPost.title || \"\"} name=\"title\" onChange={handleChange} />\r\n        </div>\r\n        <div>\r\n          Author: <input value={newPost.author || \"\"} name=\"author\" onChange={handleChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AddNew","import React from 'react'\r\n\r\nconst Post = ({post, deletePost}) => {\r\n  return (\r\n    <li>\r\n    {post.title} {post.author} {post.url} {post.likes} \r\n    <button title={post.title} value={post.id} onClick={deletePost}>del</button>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Post","import React from \"react\";\r\nimport Post from \"./Post\";\r\n\r\nconst PostList = ({ searchFilter, deletePost, updatePost }) => {\r\n  const postList = () =>\r\n    searchFilter().map((post, id) => (\r\n      <Post key={id} post={post} deletePost={deletePost} updatePost={updatePost} />\r\n    ));\r\n\r\n  return (\r\n    <div>\r\n      <h2>Posts</h2>\r\n      <ol style={postListStyle}>{postList()}</ol>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst postListStyle = {\r\n    color: \"grey\",\r\n    paddingTop: \"5px\",\r\n    fontSize: \"15px\",\r\n}\r\n\r\nexport default PostList;\r\n","import axios from \"axios\";\r\nconst baseUrl = '/api/posts';\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst remove = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nexport default { getAll, create, update, remove };\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message[0] === \"success\") {\r\n    return <div style={successStyle}>{message[1]}</div>;\r\n  } else if (message[0] === \"error\") {\r\n    return <div style={errorStyle}>{message[1]}</div>;\r\n  } else {\r\n    return <div style={noMessage}></div>;\r\n  }\r\n};\r\n\r\nconst errorStyle = {\r\n  display: \"block\",\r\n  color: \"red\",\r\n  background: \"lightgrey\",\r\n  fontSize: \"20px\",\r\n  borderStyle: \"solid\",\r\n  borderRadius: \"5px\",\r\n  padding: \"10px\",\r\n  marginBottom: \"10px\"\r\n};\r\n\r\nconst successStyle = {\r\n  display: \"block\",\r\n  color: \"green\",\r\n  background: \"lightgrey\",\r\n  fontSize: \"20px\",\r\n  borderStyle: \"solid\",\r\n  borderRadius: \"5px\",\r\n  padding: \"10px\",\r\n  marginBottom: \"10px\"\r\n};\r\n\r\nconst noMessage = {\r\n  display: \"none\",\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Search from \"./components/Search\";\r\nimport AddNew from \"./components/AddNew\";\r\nimport PostList from \"./components/PostList\";\r\nimport postService from \"./services/posts\";\r\nimport Notification from \"./components/Notification\";\r\n\r\nconst App = () => {\r\n  const [posts, setPosts] = useState([]);\r\n  const [newPost, setNewPost] = useState([]);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [message, setMessage] = useState([]);\r\n\r\n  useEffect(() => {\r\n    postService\r\n      .getAll()\r\n      .then(initialPosts => {\r\n        setPosts(initialPosts);\r\n      })\r\n      .catch(error => {\r\n        console.log(error.message);\r\n      });\r\n  }, []);\r\n\r\n  //Search\r\n  const searchFilter = () =>\r\n    posts.filter(post =>\r\n      post.title.toLowerCase().includes(search.toLowerCase())\r\n    );\r\n  const handleSearch = event => {\r\n    setSearch(event.target.value);\r\n  };\r\n\r\n  //NewPost state change\r\n  const handleChange = event => {\r\n    if(event.target.name === \"title\") {\r\n      const newTitle = event.target.value\r\n      setNewPost(prevState => {\r\n        return { ...prevState, title: newTitle };\r\n      });  \r\n    }\r\n    if(event.target.name === \"author\") {\r\n      const newAuthor = event.target.value\r\n      setNewPost(prevState => {\r\n        return { ...prevState, author: newAuthor };\r\n      });\r\n    }\r\n  };\r\n\r\n  //Checks and returns already existing post or undefined\r\n  const checkExisting = newTitle => {\r\n    const titleMatch = posts.find(post => post!==undefined ? (post.title === newTitle) : undefined)\r\n    return titleMatch;\r\n  };\r\n\r\n  //Add a new title\r\n  const addPost = postObject => {\r\n    postService\r\n      .create(postObject)\r\n      .then(returnedPost => {\r\n        setPosts(posts.concat(returnedPost));\r\n        setMessage([\"success\", `'${postObject.title}' was added`]);\r\n        setTimeout(() => {\r\n          setMessage([]);\r\n        }, 5000);\r\n      })\r\n      .catch(error => {\r\n        setMessage([\"error\", error.response.data.error]);\r\n        setTimeout(() => {\r\n          setMessage([]);\r\n        }, 5000);\r\n      });\r\n  };\r\n\r\n  //Update existing post\r\n  const updatePost = (postMatch, postObject) => {\r\n    if (window.confirm(`${postMatch.title} is already added to phonebook. Do you want to replace it?`)) {\r\n      postService\r\n        .update(postMatch.id, postObject)\r\n        .then(updatedPost => {\r\n          setPosts(\r\n            posts.map(post => (post.id !== postMatch.id ? post : updatedPost))\r\n          );\r\n          setMessage([\"success\", `'${postMatch.title}' was updated`]);\r\n          setTimeout(() => {\r\n            setMessage([]);\r\n          }, 5000);\r\n        })\r\n        .catch(error => {\r\n          console.log(error.response);\r\n          setMessage([\"error\", error.response.data.error]);\r\n          setTimeout(() => {\r\n            setMessage([]);\r\n          }, 5000);\r\n        });\r\n    }\r\n  };\r\n\r\n  //Handle add or update functionality\r\n  const handleData = event => {\r\n    event.preventDefault();\r\n    const postObject = {\r\n      id: posts.length++,\r\n      title: newPost.title,\r\n      author: newPost.author,\r\n      url: \"url\",\r\n      likes: 0\r\n    };\r\n    const postMatch = checkExisting(postObject.title);\r\n    postMatch === undefined\r\n      ? addPost(postObject)\r\n      : updatePost(postMatch, postObject);\r\n      setNewPost([])\r\n  };\r\n\r\n  //Delete post\r\n  const deletePost = event => {\r\n    event.preventDefault();\r\n    const deletedPostTitle = event.target.title;\r\n    if (window.confirm(`Do you want to delete ${deletedPostTitle}`)) {\r\n      postService\r\n        .remove(event.target.value)\r\n        .then(() => {\r\n          setPosts(posts.filter(post => post.title !== deletedPostTitle));\r\n          setMessage([\"success\", `'${deletedPostTitle}' was deleted`]);\r\n          setTimeout(() => {\r\n            setMessage([]);\r\n          }, 5000);\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n          setMessage([\r\n            \"error\",\r\n            `Note '${deletedPostTitle}' was already deleted`\r\n          ]);\r\n          setTimeout(() => {\r\n            setMessage([]);\r\n          }, 5000);\r\n          setPosts(posts.filter(post => post.title !== deletedPostTitle));\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Blog posts</h2>\r\n      <Notification message={message} />\r\n      <Search search={search} handleSearch={handleSearch} />\r\n      <AddNew\r\n        handleData={handleData}\r\n        newPost={newPost}\r\n        handleChange={handleChange}\r\n      />\r\n      <PostList\r\n        searchFilter={searchFilter}\r\n        deletePost={deletePost}\r\n        updatePost={updatePost}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}