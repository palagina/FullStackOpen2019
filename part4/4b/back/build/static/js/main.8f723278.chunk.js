(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports=n(39)},21:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(14),c=n.n(r),l=(n(21),n(4)),u=n(3),i=function(e){var t=e.search,n=e.handleSearch;return o.a.createElement("div",null,o.a.createElement("form",null,o.a.createElement("input",{placeholder:"Search..",value:t,onChange:n})))},s=function(e){var t=e.handleData,n=e.newPost,a=e.handleChange;return o.a.createElement("div",null,o.a.createElement("h3",null,"Add a new phone"),o.a.createElement("form",{onSubmit:t},o.a.createElement("div",null,"Title: ",o.a.createElement("input",{value:n.title||"",name:"title",onChange:a})),o.a.createElement("div",null,"Author: ",o.a.createElement("input",{value:n.author||"",name:"author",onChange:a})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add"))))},d=function(e){var t=e.post,n=e.deletePost;return o.a.createElement("li",null,t.title," ",t.author," ",t.url," ",t.likes,o.a.createElement("button",{title:t.title,value:t.id,onClick:n},"del"))},f={color:"grey",paddingTop:"5px",fontSize:"15px"},m=function(e){var t=e.searchFilter,n=e.deletePost,a=e.updatePost;return o.a.createElement("div",null,o.a.createElement("h2",null,"Posts"),o.a.createElement("ol",{style:f},t().map(function(e,t){return o.a.createElement(d,{key:t,post:e,deletePost:n,updatePost:a})})))},p=n(2),h=n.n(p),g=function(){return h.a.get("/api/posts").then(function(e){return e.data})},v=function(e){return h.a.post("/api/posts",e).then(function(e){return e.data})},E=function(e,t){return h.a.put("".concat("/api/posts","/").concat(e),t).then(function(e){return e.data})},b=function(e){return h.a.delete("".concat("/api/posts","/").concat(e)).then(function(e){return e.data})},w={display:"block",color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},y={display:"block",color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},S={display:"none"},j=function(e){var t=e.message;return"success"===t[0]?o.a.createElement("div",{style:y},t[1]):"error"===t[0]?o.a.createElement("div",{style:w},t[1]):o.a.createElement("div",{style:S})},k=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),d=Object(u.a)(c,2),f=d[0],p=d[1],h=Object(a.useState)(""),w=Object(u.a)(h,2),y=w[0],S=w[1],k=Object(a.useState)([]),x=Object(u.a)(k,2),O=x[0],P=x[1];Object(a.useEffect)(function(){g().then(function(e){r(e)}).catch(function(e){console.log(e.message)})},[]);var C=function(e,t){window.confirm("".concat(e.title," is already added to phonebook. Do you want to replace it?"))&&E(e.id,t).then(function(t){r(n.map(function(n){return n.id!==e.id?n:t})),P(["success","'".concat(e.title,"' was updated")]),setTimeout(function(){P([])},5e3)}).catch(function(e){console.log(e.response),P(["error",e.response.data.error]),setTimeout(function(){P([])},5e3)})};return o.a.createElement("div",null,o.a.createElement("h2",null,"Blog posts"),o.a.createElement(j,{message:O}),o.a.createElement(i,{search:y,handleSearch:function(e){S(e.target.value)}}),o.a.createElement(s,{handleData:function(e){e.preventDefault();var t,a={id:n.length++,title:f.title,author:f.author,url:"url",likes:0},o=(t=a.title,n.find(function(e){return void 0!==e?e.title===t:void 0}));void 0===o?function(e){v(e).then(function(t){r(n.concat(t)),P(["success","'".concat(e.title,"' was added")]),setTimeout(function(){P([])},5e3)}).catch(function(e){P(["error",e.response.data.error]),setTimeout(function(){P([])},5e3)})}(a):C(o,a),p([])},newPost:f,handleChange:function(e){if("title"===e.target.name){var t=e.target.value;p(function(e){return Object(l.a)({},e,{title:t})})}if("author"===e.target.name){var n=e.target.value;p(function(e){return Object(l.a)({},e,{author:n})})}}}),o.a.createElement(m,{searchFilter:function(){return n.filter(function(e){return e.title.toLowerCase().includes(y.toLowerCase())})},deletePost:function(e){e.preventDefault();var t=e.target.title;window.confirm("Do you want to delete ".concat(t))&&b(e.target.value).then(function(){r(n.filter(function(e){return e.title!==t})),P(["success","'".concat(t,"' was deleted")]),setTimeout(function(){P([])},5e3)}).catch(function(e){console.log(e),P(["error","Note '".concat(t,"' was already deleted")]),setTimeout(function(){P([])},5e3),r(n.filter(function(e){return e.title!==t}))})},updatePost:C}))};c.a.render(o.a.createElement(k,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.8f723278.chunk.js.map